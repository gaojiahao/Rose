webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("VCXJ"),i={data:()=>({tablist:[{title:"我的待办",path:"/to_do",icon:"icon-daiban"},{title:"我的已办",path:"/finish",icon:"icon-yiban"}],num:"0"}),created(){this.$event.$on("num",t=>{this.num=t})}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("keep-alive",[s("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]})],1),t._v(" "),s("nav",{staticClass:"navbar"},t._l(t.tablist,function(e){return s("router-link",{attrs:{to:e.path}},[s("span",{staticClass:"iconfont",class:e.icon}),t._v(" "),s("p",[t._v(t._s(e.title))]),t._v(" "),s("span",{staticClass:"weui-badge",staticStyle:{position:"absolute",top:"0",right:"40%"}},[t._v(t._s(t.num))])])}))],1)},staticRenderFns:[]};var o=s("X4nt")(i,n,!1,function(t){s("n9Vy")},null,null).exports,r=s("zO6J"),l=s("2sCs"),c=s.n(l);function _(t){return new Promise((e,s)=>{c.a.get("/H_roleplay-si/wxLogin?code="+t+"&state=1").then(t=>{const s=t.data;e(s)})})}function d(t){return new Promise((e,s)=>{c.a.get("/H_roleplay-si/ds/getMyToDoTask",{headers:{authorization:t}}).then(t=>{console.log(t),e(t)}).catch(t=>{e(t)})})}function v(t,e){return new Promise((s,a)=>{c.a.get("/H_roleplay-si/ds/listTaskLogByTransCode",{headers:{authorization:e},params:{transCode:t}}).then(t=>{const e=t.data.tableContent;s(e)})})}var u=s("7J9g");let p;var h={data:()=>({isLoadMore:!1,listArr:[],more:"加载中...",arr:[]}),methods:{goDetail(t){this.$router.push({path:"/to_do/do_detail",query:{info:t}})}},mounted(){(p=new u.a("#td",{probeType:2,click:!0,scrollY:!0,pullUpLoad:{threshold:-50}})).on("scrollStart",()=>{p.refresh()}),p.on("pullingUp",()=>{this.isLoadMore=!0;setTimeout(()=>{this.more="没有数据了"},1e3)})},created(){d(localStorage.getItem("token")).then(t=>{console.log(t),this.listArr=t.data.tableContent,this.$event.$emit("num",t.data.tableContent.length)}),window.scrollTo(0,0)}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page",attrs:{id:"td"}},[s("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.listArr,function(e){return s("li",{on:{click:function(s){t.goDetail(e)}}},[s("p",[s("span",{staticClass:"task_name"},[t._v(t._s(e.requireName))]),t._v(" "),s("i",{staticClass:"date"},[t._v(t._s(e.startTime.substring(0,10)))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("操作名称："+t._s(e.nodeName))]),t._v(" "),s("em",{staticClass:"status"},[t._v(t._s(e.status))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("发起人："+t._s(e.crtName))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v(t._s(e.businessKey))])])])})),t._v(" "),t.isLoadMore?s("div",{staticClass:"bottom"},[s("span",[t._v(t._s(t.more))])]):t._e()])]),t._v(" "),s("transition",{attrs:{"enter-active-class":"slideInRight","leave-active-class":"slideOutRight"}},[s("router-view")],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-search-bar",attrs:{id:"searchBar"}},[s("form",{staticClass:"weui-search-bar__form"},[s("div",{staticClass:"weui-search-bar__box"},[s("i",{staticClass:"weui-icon-search"}),t._v(" "),s("input",{staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"搜索",required:""}}),t._v(" "),s("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"}})]),t._v(" "),s("label",{staticClass:"weui-search-bar__label",attrs:{id:"searchText"}},[s("i",{staticClass:"weui-icon-search"}),t._v(" "),s("span",[t._v("搜索")])])]),t._v(" "),s("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"}},[t._v("取消")])])}]};var m=s("X4nt")(h,f,!1,function(t){s("XiAe")},null,null).exports;let w;var C={data:()=>({isLoadMore:!1,doneList:[],more:"加载中"}),methods:{goDetail(t){this.$router.push({path:"/finish/done_detail",query:{info:t}})}},mounted(){(w=new u.a("#finish",{probeType:2,scrollY:!0,click:!0,pullUpLoad:{threshold:-50}})).on("scrollStart",()=>{w.refresh()}),w.on("pullingUp",()=>{this.isLoadMore=!0;setTimeout(()=>{this.more="没有数据了"},1e3)})},created(){window.scrollTo(0,0);var t,e=localStorage.getItem("token");(t=e,new Promise((e,s)=>{c.a.get("/H_roleplay-si/ds/getMyDoneTask",{headers:{authorization:t}}).then(t=>{const s=t.data;e(s)})})).then(t=>{this.doneList=t.tableContent})}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page",attrs:{id:"finish"}},[s("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.doneList,function(e){return s("li",{on:{click:function(s){t.goDetail(e)}}},[s("p",[s("span",{staticClass:"task_name"},[t._v(t._s(e.requireName))]),t._v(" "),s("i",{staticClass:"date"},[t._v(t._s(e.startTime.substring(0,10)))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("操作名称："+t._s(e.nodeName))]),t._v(" "),s("em",{staticClass:"status"},[t._v(t._s(e.status))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("发起人："+t._s(e.crtName))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v("交易号："+t._s(e.businessKey))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v("完成时间："+t._s(e.endTime))])])])})),t._v(" "),t.isLoadMore?s("div",{staticClass:"bottom"},[s("span",[t._v(t._s(t.more))])]):t._e()])]),t._v(" "),s("transition",{attrs:{"enter-active-class":"slideInRight","leave-active-class":"slideOutRight"}},[s("router-view")],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-search-bar",attrs:{id:"searchBar"}},[s("form",{staticClass:"weui-search-bar__form"},[s("div",{staticClass:"weui-search-bar__box"},[s("i",{staticClass:"weui-icon-search"}),t._v(" "),s("input",{staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"搜索",required:""}}),t._v(" "),s("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"}})]),t._v(" "),s("label",{staticClass:"weui-search-bar__label",attrs:{id:"searchText"}},[s("i",{staticClass:"weui-icon-search"}),t._v(" "),s("span",[t._v("搜索")])])]),t._v(" "),s("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"}},[t._v("取消")])])}]};var b=s("X4nt")(C,g,!1,function(t){s("muUO")},null,null).exports;let I;var y={data:()=>({infoList:[],detailInfo:{},showDialog:!1,dialogInfo:"确定同意该请求吗？"}),methods:{agree(){this.showDialog=!0,this.dialogInfo="确定同意该请求吗？"},reject(){this.dialogInfo="确定拒绝该请求吗?",this.showDialog=!0},close(){this.showDialog=!1}},created(){this.detailInfo=this.$route.query.info;let t=localStorage.getItem("token");console.log(t),v(this.detailInfo.businessKey,t).then(t=>{this.infoList=t})},mounted(){I=new u.a(".process",{probeType:2})}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"td_detail"}},[s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[t._v(t._s(t.detailInfo.requireName))]),t._v(" "),s("p",{staticClass:"status1"},[t._v(t._s(t.detailInfo.status))])]),t._v(" "),s("ul",[t.detailInfo.requireName?s("li",[s("span",[t._v("需求名称:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.requireName))])]):t._e(),t._v(" "),s("li",[s("span",[t._v("发 起 人:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtName))])]),t._v(" "),s("li",[s("span",[t._v("发起时间:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtTime))])]),t._v(" "),t.detailInfo.level?s("li",[s("span",[t._v("优 先 级:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.level))])]):t._e(),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"process limit"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"agree_status"},t._l(t.infoList,function(e){return s("div",{staticClass:"allInfo"},[s("div",{staticClass:"info"},[s("i",{staticClass:"iconfont icon-shenfenzheng"}),t._v(" "),s("p",[s("span",[t._v(t._s(e.userName))]),t._v(" "),s("span",[t._v(t._s(e.nodeName))]),t._v(" "),s("span",[t._v(t._s(e.endTime))])]),t._v(" "),e.status?s("i",{staticClass:" weui-icon weui-icon-success"}):t._e(),t._v(" "),e.status?t._e():s("i",{staticClass:" weui-icon weui-icon-waiting",staticStyle:{top:"15px"}}),t._v(" "),s("em",{staticClass:"taskStatus"},[t._v(t._s(e.status))])]),t._v(" "),s("div",{staticClass:"iconfont icon-xia arrow"})])}))])]),t._v(" "),s("div",{staticClass:"btn"},[s("span",{on:{click:function(e){t.agree()}}},[t._v("同意")]),t._v(" "),s("span",{on:{click:function(e){t.reject()}}},[t._v("拒绝")])]),t._v(" "),t.showDialog?s("div",{staticClass:"js_dialog",staticStyle:{opacity:"1"},attrs:{id:"iosDialog1"}},[s("div",{staticClass:"weui-mask"}),t._v(" "),s("div",{staticClass:"weui-dialog"},[s("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.dialogInfo))]),t._v(" "),s("div",{staticClass:"weui-dialog__ft"},[s("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:function(e){t.close()}}},[t._v("确认")]),t._v(" "),s("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.close()}}},[t._v("取消")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",[this._v("预计交付日：")]),this._v(" "),e("input",{attrs:{type:"date"}})])}]};var T=s("X4nt")(y,k,!1,function(t){s("iMyS")},null,null).exports;let $;var L={data:()=>({infoList:[],detailInfo:{}}),created(){this.detailInfo=this.$route.query.info;let t=localStorage.getItem("token");console.log(t),v(this.detailInfo.businessKey,t).then(t=>{this.infoList=t})},mounted(){$=new u.a(".taskDetail",{probeType:2})}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"finish_detail"}},[s("div",{staticClass:"taskDetail"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[t._v(t._s(t.detailInfo.requireName))]),t._v(" "),s("p",{staticClass:"status1 done_status"},[t._v(t._s(t.detailInfo.status))])]),t._v(" "),s("ul",[t.detailInfo.requireName?s("li",[s("span",[t._v("需求名称:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.requireName))])]):t._e(),t._v(" "),s("li",[s("span",[t._v("发 起 人:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtName))])]),t._v(" "),s("li",[s("span",[t._v("发起时间:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtTime))])]),t._v(" "),t.detailInfo.level?s("li",[s("span",[t._v("优 先 级:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.level))])]):t._e()]),t._v(" "),s("div",{staticClass:"process"},[s("div",{staticClass:"agree_status"},[t._l(t.infoList,function(e){return s("div",{staticClass:"allInfo"},[s("div",{staticClass:"info"},[s("i",{staticClass:"iconfont icon-shenfenzheng"}),t._v(" "),s("p",[s("span",[t._v(t._s(e.userName))]),t._v(" "),s("span",[t._v(t._s(e.nodeName))]),t._v(" "),s("span",[t._v(t._s(e.endTime))])]),t._v(" "),e.status?s("i",{staticClass:" weui-icon weui-icon-success"}):t._e(),t._v(" "),e.status?t._e():s("i",{staticClass:" weui-icon weui-icon-waiting",staticStyle:{top:"15px"}}),t._v(" "),s("em",{staticClass:"taskStatus"},[t._v(t._s(e.status))])]),t._v(" "),s("div",{staticClass:"iconfont icon-xia arrow"})])}),t._v(" "),"进行中"!=t.detailInfo.status?s("div",{staticClass:"process_over"},[t._v("流程结束")]):t._e()],2)])])])])},staticRenderFns:[]};var x=s("X4nt")(L,N,!1,function(t){s("oUeS")},null,null).exports,S=s("HLLT"),q=s.n(S),D={data:()=>({}),created(){var t=localStorage.getItem("token"),e=this;setTimeout(function(){d(t).then(t=>{if(200==t.status)console.log(t.data),e.$router.replace("/to_do");else{console.log("进入了");var s="https://rfd.roletask.com/Rose/?code=ggiBwzBQ2c6PsRr1sgliKBg-wopJaHwtHmEOA5o_02U&state=1";if(s.indexOf("code")>0){_(s.split("?")[1].split("&")[0].split("=")[1]).then(t=>{localStorage.setItem("token",t.token),e.$router.replace("/to_do")})}else{window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=ww3c1aa17c16e380b7&redirect_uri=https%3a%2f%2frfd.roletask.com%2fRose%2f%23%2fto_do&response_type=code&scope=snsapi_base&agentid=1000017&state=1#wechat_redirect"}}})},0);var s=location.href;if((s="https://rfd.roletask.com/Rose?code=UUyGn0LD8gcbH_iZz2WwY-CDkaoE9U4QBE-_Ew5R_iQ&state=1").indexOf("code")>0){_(s.split("?")[1].split("&")[0].split("=")[1]).then(t=>{localStorage.setItem("token",t.token),this.$router.push("/to_do")})}else{window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=ww3c1aa17c16e380b7&redirect_uri=https%3a%2f%2frfd.roletask.com%2fRose%2f%23%2fto_do&response_type=code&scope=snsapi_base&agentid=1000017&state=1#wechat_redirect"}}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var E=s("X4nt")(D,R,!1,function(t){s("f4pW")},null,null).exports;a.a.use(q.a),a.a.use(r.a);var U=new r.a({routes:[{path:"/to_do",component:m,meta:{title:"我的待办"},children:[{path:"do_detail",component:T}]},{path:"/finish",component:b,meta:{title:"我的已办"},children:[{path:"done_detail",component:x}]},{path:"/welcome",component:E},{path:"/",redirect:"/welcome"}]});a.a.config.productionTip=!1,a.a.prototype.$http=c.a,a.a.prototype.$event=new a.a,new a.a({el:"#app",router:U,template:"<App/>",components:{App:o}})},XiAe:function(t,e){},f4pW:function(t,e){},iMyS:function(t,e){},muUO:function(t,e){},n9Vy:function(t,e){},oUeS:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.60f98b87ca4fe9517d0f.js.map