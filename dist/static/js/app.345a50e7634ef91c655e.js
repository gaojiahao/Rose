webpackJsonp([1],{"2MkV":function(t,a){},AZKK:function(t,a){},N7hW:function(t,a){},NHnr:function(t,a,s){"use strict";function e(t){return new l.a(function(a,s){u.a.get("/H_roleplay-si/ds/getMyToDoTask",{headers:{authorization:t}}).then(function(t){var s=t.data;a(s)})})}Object.defineProperty(a,"__esModule",{value:!0});var i=s("HWwm"),n={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"app"}},[s("keep-alive",[s("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]})],1),t._v(" "),s("nav",{staticClass:"navbar"},t._l(t.tablist,function(a){return s("router-link",{attrs:{to:a.path}},[s("span",{staticClass:"iconfont",class:a.icon}),t._v(" "),s("p",[t._v(t._s(a.title))]),t._v(" "),s("span",{staticClass:"weui-badge",staticStyle:{position:"absolute",top:"0",right:"40%"}},[t._v("8")])])}))],1)},staticRenderFns:[]},o=s("UF+H")({data:function(){return{tablist:[{title:"我的待办",path:"/to_do",icon:"icon-daiban"},{title:"我的已办",path:"/finish",icon:"icon-yiban"}]}}},n,!1,function(t){s("N7hW")},null,null).exports,r=s("ie8r"),c=s("VLzP"),l=s.n(c),_=s("s9z8"),u=s.n(_),v=void 0,d={data:function(){return{isLoadMore:!1,listArr:[],more:"加载中",num:0,arr:[]}},methods:{goDetail:function(t){this.$router.push({name:"detail",query:{info:t}})}},mounted:function(){var t=this;(v=new IScroll("#td",{probeType:2,tap:!0,click:!0})).on("scrollStart",function(){v.maxScrollY<0&&(t.isLoadMore=!0),v.refresh()}),v.on("scroll",function(){v.y<=v.maxScrollY-30&&(t.more="没有数据了")})},created:function(){var t=this,a=localStorage.getItem("token");if(a)e(a).then(function(a){t.listArr=a.tableContent,t.num=a.tableContent.length});else{(function(t){return new l.a(function(a,s){u.a.get("/H_roleplay-si/wxLogin?code="+t+"&state=1").then(function(t){var s=t.data;a(s)})})})("NxZV65SSME44GY_XOycz1ue1tv7KZymBi0DbGt8x3Pc").then(function(t){localStorage.setItem("token",t.token)});var s=localStorage.getItem("token");console.log(s),e("af42c1f656bf487cacb602ece0c29dc4MOBILE").then(function(a){t.listArr=a.tableContent,t.num=a.tableContent.length})}}},h={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"page",attrs:{id:"td"}},[s("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.listArr,function(a){return s("li",{on:{click:function(s){t.goDetail(a)}}},[s("p",[s("span",{staticClass:"task_name"},[t._v(t._s(a.requireName))]),t._v(" "),s("i",{staticClass:"date"},[t._v(t._s(a.startTime.substring(0,10)))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("操作名称："+t._s(a.nodeName))]),t._v(" "),s("em",{staticClass:"status"},[t._v(t._s(a.status))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("发起人："+t._s(a.crtName))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v(t._s(a.businessKey))])])])})),t._v(" "),t.isLoadMore?s("div",{staticClass:"bottom"},[s("span",[t._v(t._s(t.more))])]):t._e()])]),t._v(" "),s("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"weui-search-bar",attrs:{id:"searchBar"}},[a("form",{staticClass:"weui-search-bar__form"},[a("div",{staticClass:"weui-search-bar__box"},[a("i",{staticClass:"weui-icon-search"}),this._v(" "),a("input",{staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"搜索",required:""}}),this._v(" "),a("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"}})]),this._v(" "),a("label",{staticClass:"weui-search-bar__label",attrs:{id:"searchText"}},[a("i",{staticClass:"weui-icon-search"}),this._v(" "),a("span",[this._v("搜索")])])]),this._v(" "),a("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"}},[this._v("取消")])])}]},p=s("UF+H")(d,h,!1,function(t){s("AZKK")},null,null).exports,f=void 0,m={data:function(){return{isLoadMore:!1,doneList:[],more:"加载中"}},methods:{goDetail:function(t){this.$router.push({path:"/to_do/detail",query:{info:t}})}},mounted:function(){var t=this;(f=new IScroll("#finish",{probeType:3})).on("scrollStart",function(){f.maxScrollY<0&&(t.isLoadMore=!0),f.refresh()}),f.on("scroll",function(){f.y<=f.maxScrollY-30&&(t.more="没有数据了")})},created:function(){var t=this;(function(t){return new l.a(function(a,s){u.a.get("/H_roleplay-si/ds/getMyDoneTask",{headers:{authorization:t}}).then(function(t){var s=t.data;a(s)})})})(localStorage.getItem("token")).then(function(a){t.doneList=a.tableContent})}},C={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"page",attrs:{id:"finish"}},[s("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.doneList,function(a){return s("li",{on:{click:function(s){t.goDetail(a)}}},[s("p",[s("span",{staticClass:"task_name"},[t._v(t._s(a.requireName))]),t._v(" "),s("i",{staticClass:"date"},[t._v(t._s(a.startTime.substring(0,10)))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("操作名称："+t._s(a.nodeName))]),t._v(" "),s("em",{staticClass:"status"},[t._v(t._s(a.status))])]),t._v(" "),s("p",[s("span",{staticClass:"do_user"},[t._v("发起人："+t._s(a.crtName))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v("交易号："+t._s(a.businessKey))])]),t._v(" "),s("p",[s("em",{staticClass:"code"},[t._v("完成时间："+t._s(a.endTime))])])])})),t._v(" "),t.isLoadMore?s("div",{staticClass:"bottom"},[s("span",[t._v(t._s(t.more))])]):t._e()])]),t._v(" "),s("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"weui-search-bar",attrs:{id:"searchBar"}},[a("form",{staticClass:"weui-search-bar__form"},[a("div",{staticClass:"weui-search-bar__box"},[a("i",{staticClass:"weui-icon-search"}),this._v(" "),a("input",{staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"搜索",required:""}}),this._v(" "),a("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"}})]),this._v(" "),a("label",{staticClass:"weui-search-bar__label",attrs:{id:"searchText"}},[a("i",{staticClass:"weui-icon-search"}),this._v(" "),a("span",[this._v("搜索")])])]),this._v(" "),a("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"}},[this._v("取消")])])}]},w=s("UF+H")(m,C,!1,function(t){s("2MkV")},null,null).exports,b={data:function(){return{infoList:[],detailInfo:{},showDialog:!1,dialogInfo:"确定同意该请求吗？"}},methods:{agree:function(){this.showDialog=!0},reject:function(){this.dialogInfo="确定拒绝该请求吗",this.showDialog=!0},close:function(){this.showDialog=!1}},created:function(){var t=this,a=location.href.split("?")[1].split("&")[0].split("=")[1];console.log(a),this.detailInfo=this.$route.query.info;var s=localStorage.getItem("token");(function(t,a){return new l.a(function(s,e){u.a.get("/H_roleplay-si/ds/listTaskLogByTransCode",{headers:{authorization:a},params:{transCode:t}}).then(function(t){var a=t.data.tableContent;s(a)})})})(this.detailInfo.businessKey,s).then(function(a){t.infoList=a})},mounted:function(){new IScroll(".taskDetail",{probeType:3})}},g={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"td_detail"}},[s("div",{staticClass:"taskDetail",staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[t._v(t._s(t.detailInfo.requireName))]),t._v(" "),s("p",{staticClass:"status1"},[t._v(t._s(t.detailInfo.status))])]),t._v(" "),s("ul",[s("li",[s("span",[t._v("需求名称:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.requireName))])]),t._v(" "),s("li",[s("span",[t._v("发 起 人:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtName))])]),t._v(" "),s("li",[s("span",[t._v("发起时间:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.crtTime))])]),t._v(" "),s("li",[s("span",[t._v("优 先 级:")]),t._v(" "),s("i",[t._v(t._s(t.detailInfo.level))])]),t._v(" "),"进行中"==t.detailInfo.status?s("li",[s("span",{staticStyle:{color:"#E64340"}},[t._v("预计交付日：")]),t._v(" "),s("input",{attrs:{type:"date"}})]):t._e()]),t._v(" "),s("div",{staticClass:"process"},[s("div",{staticClass:"agree_status"},t._l(t.infoList,function(a){return s("div",{staticClass:"allInfo"},[s("div",{staticClass:"info"},[s("i",{staticClass:"iconfont icon-shenfenzheng"}),t._v(" "),s("p",[s("span",[t._v(t._s(a.userName))]),t._v(" "),s("span",[t._v(t._s(a.nodeName))]),t._v(" "),s("span",[t._v(t._s(a.endTime))])]),t._v(" "),a.status?s("i",{staticClass:" weui-icon weui-icon-success"}):t._e(),t._v(" "),a.status?t._e():s("i",{staticClass:" weui-icon weui-icon-waiting",staticStyle:{top:"15px"}}),t._v(" "),s("em",{staticClass:"taskStatus"},[t._v(t._s(a.status))])]),t._v(" "),s("div",{staticClass:"iconfont icon-xia arrow"})])}))])])]),t._v(" "),s("div",{staticClass:"btn"},[s("span",{on:{click:function(a){t.agree()}}},[t._v("同意")]),t._v(" "),s("span",{on:{click:function(a){t.reject()}}},[t._v("拒绝")])]),t._v(" "),t.showDialog?s("div",{staticClass:"js_dialog",staticStyle:{opacity:"1"},attrs:{id:"iosDialog1"}},[s("div",{staticClass:"weui-mask"}),t._v(" "),s("div",{staticClass:"weui-dialog"},[s("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.dialogInfo))]),t._v(" "),s("div",{staticClass:"weui-dialog__ft"},[s("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:function(a){t.close()}}},[t._v("确认")]),t._v(" "),s("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(a){t.close()}}},[t._v("取消")])])])]):t._e()])},staticRenderFns:[]},y=s("UF+H")(b,g,!1,function(t){s("qJPs")},null,null).exports,k=s("Amyk"),I=s.n(k);i.a.use(I.a),i.a.use(r.a);var S=new r.a({routes:[{path:"/to_do",component:p,meta:{title:"我的待办"},children:[{path:"detail",component:y,name:"detail"}]},{path:"/finish",component:w,meta:{title:"我的已办"}},{path:"/",redirect:"/to_do"}]});i.a.config.productionTip=!1,i.a.prototype.$http=u.a,i.a.prototype.$event=new i.a,new i.a({el:"#app",router:S,template:"<App/>",components:{App:o}})},qJPs:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.345a50e7634ef91c655e.js.map